(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},75:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),c=a(17),o=a.n(c),r=(a(59),a(15)),i=(a(60),a(61),a(107)),l=a(51),u=a.n(l),p=a(26),d=p.a.initializeApp({apiKey:"AIzaSyAbJ88CJk9HTNg7XxsJ53lmGhmTuFlBiZE",authDomain:"instagam-clone-793a0.firebaseapp.com",projectId:"instagam-clone-793a0",storageBucket:"instagam-clone-793a0.appspot.com",messagingSenderId:"889655961731",appId:"1:889655961731:web:835cc03952f4d2c31693b6",measurementId:"G-QKFRDYRB06"}).firestore(),j=p.a.auth(),m=p.a.storage(),g=a(5);var b=function(e){var t=e.image,a=e.caption,s=e.username,c=e.code,o=(e.displayName,Object(n.useState)(null)),l=Object(r.a)(o,2),p=l[0],m=l[1];return Object(n.useEffect)((function(){var e=j.onAuthStateChanged((function(e){m(e||null)}));return function(){e()}}),[p,s]),console.log(p),Object(g.jsxs)("div",{className:"post",children:[Object(g.jsxs)("div",{className:"post__header",children:[Object(g.jsxs)("div",{className:"left",children:[Object(g.jsx)(i.a,{className:"post__avatar",alt:s,src:"/statis/images/avatar/1.jpg"}),Object(g.jsx)("h3",{children:s})]}),p&&s===p.displayName?Object(g.jsx)(u.a,{onClick:function(){null===p.displayName||(s===p.displayName?d.collection("posts").doc(c).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})):s!==p.displayName&&alert("you cannot delete other user's photo"))},className:"button"}):""]}),Object(g.jsx)("img",{className:"post__image",src:t,alt:""}),Object(g.jsxs)("h4",{className:"Post_text",children:[Object(g.jsxs)("strong",{children:[s," :"]}),"  ",a]})]})},h=a(105),O=a(103),f=a(106),x=a(104);a(75);var v=function(e){var t=e.username,a=Object(n.useState)(""),s=Object(r.a)(a,2),c=s[0],o=s[1],i=Object(n.useState)(null),l=Object(r.a)(i,2),u=l[0],j=l[1],b=Object(n.useState)(0),h=Object(r.a)(b,2),O=h[0],f=h[1];return Object(g.jsxs)("div",{className:"ImageUpload",children:[Object(g.jsx)("progress",{className:"ImageUpload__progress",value:O,max:"100"}),Object(g.jsx)("input",{className:"ImageUpload__caption",type:"text",placeholder:"Enter a Caption",onChange:function(e){return o(e.target.value)}}),Object(g.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&j(e.target.files[0])}}),Object(g.jsx)(x.a,{onClick:function(){m.ref("images/".concat(u.name)).put(u).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);f(t)}),(function(e){console.log(e),alert(e.message)}),(function(){m.ref("images").child(u.name).getDownloadURL().then((function(e){d.collection("posts").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),caption:c,imageUrl:e,username:t})}))})),f(0),o(""),j(null)},variant:"contained",color:"secondry",children:"Upload"})]})},_=a(41),y=a.n(_);function N(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var I=Object(O.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var S=function(){var e=I(),t=Object(n.useState)(N),a=Object(r.a)(t,1)[0],s=Object(n.useState)([]),c=Object(r.a)(s,2),o=c[0],i=c[1],l=Object(n.useState)(!1),u=Object(r.a)(l,2),p=u[0],m=u[1],O=Object(n.useState)(""),S=Object(r.a)(O,2),C=S[0],k=S[1],w=Object(n.useState)(""),E=Object(r.a)(w,2),U=E[0],A=E[1],B=Object(n.useState)(""),D=Object(r.a)(B,2),J=D[0],P=D[1],T=Object(n.useState)(null),z=Object(r.a)(T,2),F=z[0],R=z[1],G=Object(n.useState)(!1),H=Object(r.a)(G,2),K=H[0],L=H[1];return Object(n.useEffect)((function(){var e=j.onAuthStateChanged((function(e){e?(console.log(e.displayName),R(e)):R(null)}));return function(){e()}}),[F,C]),console.log(F),Object(n.useEffect)((function(){d.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(g.jsxs)("div",{className:"app",children:[Object(g.jsx)(h.a,{open:p,onClose:function(){return m(!1)},children:Object(g.jsx)("div",{style:a,className:e.paper,children:Object(g.jsxs)("form",{className:"app__signup",children:[Object(g.jsx)("center",{children:Object(g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png",className:"app__headerImage",alt:"Instagram"})}),Object(g.jsx)(f.a,{placeholder:"username",type:"text",value:C,onChange:function(e){return k(e.target.value)}}),Object(g.jsx)(f.a,{placeholder:"email",type:"text",value:U,onChange:function(e){return A(e.target.value)}}),Object(g.jsx)(f.a,{placeholder:"password",type:"password",value:J,onChange:function(e){return P(e.target.value)}}),Object(g.jsx)(x.a,{type:"submit",onClick:function(e){e.preventDefault(),j.createUserWithEmailAndPassword(U,J).then((function(e){return e.user.updateProfile({displayName:C})})).catch((function(e){return alert(e.message)})),m(!1)},children:"Sign UP"})]})})}),Object(g.jsx)(h.a,{open:K,onClose:function(){return L(!1)},children:Object(g.jsx)("div",{style:a,className:e.paper,children:Object(g.jsxs)("form",{className:"app__signup",children:[Object(g.jsx)("center",{children:Object(g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png",className:"app__headerImage",alt:"Instagram"})}),Object(g.jsx)(f.a,{placeholder:"email",type:"text",value:U,onChange:function(e){return A(e.target.value)}}),Object(g.jsx)(f.a,{placeholder:"password",type:"password",value:J,onChange:function(e){return P(e.target.value)}}),Object(g.jsx)(x.a,{type:"submit",onClick:function(e){e.preventDefault(),j.signInWithEmailAndPassword(U,J).catch((function(e){return alert(e.message)})),L(!1)},children:"Sign In"})]})})}),Object(g.jsxs)("div",{className:"app__header",children:[Object(g.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/1200px-Instagram_logo.svg.png",className:"app__headerImage",alt:"Instagram"}),F?Object(g.jsx)(x.a,{type:"submit",onClick:function(){return j.signOut()},children:"Log out"}):Object(g.jsxs)("div",{className:"login__container",children:[Object(g.jsx)(x.a,{variant:"contained",onClick:function(){return L(!0)},children:"sign in"}),Object(g.jsx)(x.a,{variant:"contained",onClick:function(){return m(!0)},children:"sign up"})]})]}),(null===F||void 0===F?void 0:F.displayName)?Object(g.jsx)(v,{username:F.displayName}):"",Object(g.jsx)(_.SkeletonTheme,{color:"#202020",highlightColor:"#444",children:Object(g.jsx)("div",{className:"app__posts",style:{fontSize:20,lineHeight:2},children:o?o.map((function(e){var t=e.id,a=e.post;return Object(g.jsx)(b,{code:t,image:a.imageUrl,username:a.username,caption:a.caption},t)})):Object(g.jsx)(y.a,{duration:2})})})]})};o.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(S,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.c52c32ea.chunk.js.map